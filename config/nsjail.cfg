name: "python-sandbox"
description: "Sandboxed Python execution environment"

mode: ONCE
hostname: "sandbox"
time_limit: 5

clone_newnet: true
clone_newuser: true

uidmap {
  inside_id: "1000"
  outside_id: "1000"
}

gidmap {
  inside_id: "1000"
  outside_id: "1000"
}

rlimit_as: 512
rlimit_cpu: 10
rlimit_nofile: 64
rlimit_nproc: 32

mount {
  src: "/usr/local/bin/python3"
  dst: "/usr/local/bin/python3"
  is_bind: true
  rw: false
}

mount {
  src: "/usr/bin/python3"
  dst: "/usr/bin/python3"
  is_bind: true
  rw: false
  mandatory: false
}

mount {
  src: "/usr/local/lib"
  dst: "/usr/local/lib"
  is_bind: true
  rw: false
}

mount {
  src: "/usr/local/lib/python3.11"
  dst: "/usr/local/lib/python3.11"
  is_bind: true
  rw: false
}

mount {
  src: "/usr/lib/python3.11"
  dst: "/usr/lib/python3.11"
  is_bind: true
  rw: false
  mandatory: false
}

mount {
  src: "/usr/lib"
  dst: "/usr/lib"
  is_bind: true
  rw: false
}

mount {
  src: "/lib"
  dst: "/lib"
  is_bind: true
  rw: false
}

mount {
  src: "/lib64"
  dst: "/lib64"
  is_bind: true
  rw: false
  mandatory: false
}

mount {
  src: "/tmp"
  dst: "/tmp"
  is_bind: true
  rw: true
}

mount {
  dst: "/dev"
  fstype: "tmpfs"
  rw: true
  options: "size=4M"
}

mount {
  dst: "/proc"
  fstype: "proc"
  rw: false
}

keep_env: false
envar: "PATH=/usr/local/bin:/usr/bin"
envar: "PYTHONPATH=/usr/local/lib/python3.11"